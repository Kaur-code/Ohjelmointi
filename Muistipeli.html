<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Muistipeli</title>
    <style media="screen">
      h1 {
        text-align: center;
      }
      .thing {
        display: flex;
        flex-wrap: wrap;
        position: fixed;
        left: 640px;
        border: 5px grey solid;
        width: 640px;
        height: 640px;
        cursor: pointer;
      }
      .kortit {
        border: 5px black solid;
        width: 150px;
        height: 150px;
        position: relative;
      }
      .kortinPaa {
        background-color: green;
        position: absolute;
        top: 0px;
        width: 150px;
        height: 150px;
      }
      .kortinSelka:hover {
        opacity: 1;
      }
      .kortinSelka {
        background-color: blue;
        position: absolute;
        width: 150px;
        height: 150px;
        top: 0px;
      }
      .pls {
        font-size: 60px;
        position: relative;
        bottom: 15px;
        left: 60px;
      }
      .pls2 {
        font-size: 60px;
        position: relative;
        bottom: 15px;
        left: 45px;
      }
    </style>
  </head>
  <body>
    <h1>Muistipeli</h1>
    <section class='thing'>
      <div data-value='1' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>1</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='1' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>1</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='2' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>2</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='2' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>2</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='3' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>3</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='3' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>3</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='4' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>4</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='4' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>4</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='5' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>5</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='5' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>5</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='6' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>6</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='6' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>6</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='7' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>7</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='7' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>7</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='8' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>8</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
      <div data-value='8' class="kortit">
        <div class="kortinPaa">
          <p class='pls'>8</p>
        </div>
        <div class="kortinSelka">
          <p class='pls2'>!!!</p>
        </div>
      </div>
    </section>
    <script type="text/javascript">
      const kort = document.querySelectorAll('.kortit');
      kort.forEach(boom);
      let shuffle = {
        ones: [1, 101],
        twos: [2, 102],
        threes: [3, 103],
        fours: [4, 104],
        fives: [5, 105],
        sixes: [6, 106],
        sevens: [7, 107],
        eights: [8, 108],
        ones2: [1, 201],
        twos2: [2, 202],
        threes2: [3, 203],
        fours2: [4, 204],
        fives2: [5, 205],
        sixes2: [6, 206],
        sevens2: [7, 207],
        eights2: [8, 208],
      }
      let numbs = Object.getOwnPropertyNames(shuffle);
      shuf1();
      function shuf1() {
        numbs.sort(() => Math.random() - 0.5);
      };
      shuf2();
      function shuf2() {
        for(let i = 0; i < 16; i++) {
          kort[i].children[0].children[0].innerHTML = shuffle[numbs[i]][0];
          kort[i].setAttribute('data-value', shuffle[numbs[i]][1]);
        }
      }
      function onlyUnique(value, index, self) {
        return self.indexOf(value) === index;
      }
      let arr = [];
      let arr2 = [];
      let blacklist = [];
      let num = 0;
      let temp = '';
      let temp2 = '';
      let voitto = 0;
      function boom(item) {
        item.addEventListener('click', function(){
          if (arr.length == 2) {
            arr.length = 0;
            num = 0;
          }
          num += 1
          temp = item.children[1]; // toka elementti
          if (num == 1) {
            temp2 = item.children[1]; // eka elementti
          }
          temp.style.opacity = 0;
          arr.push(item.dataset.value); // sen numero
          arr2 = arr.filter(onlyUnique);
          if (arr2.length == 2) {
            if (parseInt(arr2[0]) + 100 == parseInt(arr2[1]) || parseInt(arr2[0]) - 100 == parseInt(arr2[1])) {
              if (blacklist.includes(arr2[0]) === false && blacklist.includes(arr2[1]) === false) {
                blacklist.push(arr2[0]);
                blacklist.push(arr2[1]);
                console.log(blacklist);
                voitto += 1;
                console.log(voitto);
              }
            }
            else {
              setTimeout(function(){temp.style.opacity = 1;temp2.style.opacity = 1}, 1200);
            }
          }
          if (voitto == 8) {
            alert('Onneksi olkoon, voitit!')
          }
        });
      }
    </script>
  </body>
</html>
